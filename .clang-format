BasedOnStyle: LLVM
Language: Cpp

# C++23 project (use Latest for newer clang-format compatibility)
Standard: Latest

IndentWidth: 4
TabWidth: 4
UseTab: Never

ColumnLimit: 140
ContinuationIndentWidth: 4

# Allman braces everywhere
BreakBeforeBraces: Allman

BraceWrapping:
  AfterClass: true
  AfterControlStatement: true
  AfterEnum: true
  AfterFunction: true
  AfterNamespace: true
  AfterStruct: true
  AfterUnion: true
  AfterCaseLabel: true
  BeforeCatch: true
  BeforeElse: true
  IndentBraces: false
  SplitEmptyFunction: false
  SplitEmptyRecord: false
  SplitEmptyNamespace: false

# Make spacing consistent & readable
SpaceInEmptyParentheses: false
SpacesInParentheses: false
SpaceAfterCStyleCast: true
SpaceAfterTemplateKeyword: false
SpaceBeforeRangeBasedForLoopColon: true
SpaceBeforeInheritanceColon: true
SpaceBeforeCtorInitializerColon: true
SpaceBeforeAssignmentOperators: true

# Function calls: no space before, but control statements get one
SpaceBeforeParens: ControlStatements

# Pointer/reference style
PointerAlignment: Left
ReferenceAlignment: Left                  # `int& ref`

# Keep if/for/while blocks multi-line & readable
AllowShortIfStatementsOnASingleLine: Never
AllowShortFunctionsOnASingleLine: false
AllowShortBlocksOnASingleLine: false
AllowShortLambdasOnASingleLine: Inline

# Alignment / wrapping
AlignAfterOpenBracket: Align
AlignConsecutiveAssignments: false
AlignConsecutiveDeclarations: false
AlignOperands: AlignAfterOperator
BinPackArguments: false
BinPackParameters: false
BreakConstructorInitializers: BeforeColon
ConstructorInitializerAllOnOneLineOrOnePerLine: true

# Includes
SortIncludes: true
IncludeBlocks: Regroup

IncludeCategories:
  # 1. Main/matching header for this translation unit
  - Regex: '^"([^"]+)\.(h|hpp)$'
    Priority: 1

  # 2. Project-local headers (quoted includes from src/, include/, tests/, or relative paths)
  - Regex: '^".*"'
    Priority: 2

  # 3. Third-party libraries (spdlog, imgui, implot, glad, GLFW, gtest, benchmark, etc.)
  - Regex: '^<(spdlog|fmt|boost|gtest|gmock|benchmark|imgui|implot|glad|GLFW)/.*>'
    Priority: 3

  # 4. Third-party single-header libs (imgui.h, implot.h without path)
  - Regex: '^<(imgui|implot|glad).*\.h>'
    Priority: 3

  # 5. C++ standard library headers (no extension)
  - Regex: '^<[a-z_]+>$'
    Priority: 4

  # 6. POSIX/C system headers (.h extension, including sys/ paths)
  - Regex: '^<.+\.h>$'
    Priority: 5

  # 7. Everything else (catch-all)
  - Regex: '.*'
    Priority: 6

SortUsingDeclarations: true

# Comments
ReflowComments: true
CommentPragmas: '^ NOLINT'
