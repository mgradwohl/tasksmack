{
	"version": "2.0.0",
	"tasks": [
		// -----------------------------
		// Configure
		// -----------------------------
		{
			"label": "CMake: Configure Debug",
			"type": "shell",
			"command": "cmake",
			"args": [
				"--preset",
				"debug"
			],
			"windows": {
				"args": [
					"--preset",
					"win-debug"
				]
			},
			"group": "build",
			"problemMatcher": [],
			"presentation": {
				"reveal": "always",
				"panel": "shared",
				"clear": false,
				"echo": true,
				"focus": false
			},
			"options": {
				"cwd": "${workspaceFolder}"
			}
		},
		{
			"label": "CMake: Configure RelWithDebInfo",
			"type": "shell",
			"command": "cmake",
			"args": [
				"--preset",
				"relwithdebinfo"
			],
			"windows": {
				"args": [
					"--preset",
					"win-relwithdebinfo"
				]
			},
			"group": "build",
			"problemMatcher": [],
			"presentation": {
				"reveal": "always",
				"panel": "shared",
				"clear": false,
				"echo": true,
				"focus": false
			},
			"options": {
				"cwd": "${workspaceFolder}"
			}
		},
		{
			"label": "CMake: Configure Release",
			"type": "shell",
			"command": "cmake",
			"args": [
				"--preset",
				"release"
			],
			"windows": {
				"args": [
					"--preset",
					"win-release"
				]
			},
			"group": "build",
			"problemMatcher": [],
			"presentation": {
				"reveal": "always",
				"panel": "shared",
				"clear": false,
				"echo": true,
				"focus": false
			},
			"options": {
				"cwd": "${workspaceFolder}"
			}
		},
		{
			"label": "CMake: Configure Optimized",
			"type": "shell",
			"command": "cmake",
			"args": [
				"--preset",
				"optimized"
			],
			"windows": {
				"args": [
					"--preset",
					"win-optimized"
				]
			},
			"group": "build",
			"problemMatcher": [],
			"presentation": {
				"reveal": "always",
				"panel": "shared",
				"clear": false,
				"echo": true,
				"focus": false
			},
			"options": {
				"cwd": "${workspaceFolder}"
			}
		},
		{
			"label": "CMake: Configure ASan+UBSan (Linux)",
			"type": "shell",
			"command": "cmake",
			"args": [
				"--preset",
				"asan-ubsan"
			],
			"group": "build",
			"problemMatcher": [],
			"presentation": {
				"reveal": "always",
				"panel": "shared",
				"clear": false,
				"echo": true,
				"focus": false
			},
			"options": {
				"cwd": "${workspaceFolder}"
			}
		},
		{
			"label": "CMake: Configure TSan (Linux)",
			"type": "shell",
			"command": "cmake",
			"args": [
				"--preset",
				"tsan"
			],
			"group": "build",
			"problemMatcher": [],
			"presentation": {
				"reveal": "always",
				"panel": "shared",
				"clear": false,
				"echo": true,
				"focus": false
			},
			"options": {
				"cwd": "${workspaceFolder}"
			}
		},
		// -----------------------------
		// Build
		// -----------------------------
		{
			"label": "CMake: Build Debug",
			"type": "shell",
			"command": "cmake",
			"args": [
				"--build",
				"--preset",
				"debug"
			],
			"windows": {
				"args": [
					"--build",
					"--preset",
					"win-debug"
				]
			},
			"group": {
				"kind": "build",
				"isDefault": true
			},
			"dependsOn": "CMake: Configure Debug",
			"problemMatcher": [
				"$gcc"
			],
			"presentation": {
				"reveal": "always",
				"panel": "dedicated",
				"clear": false,
				"echo": true,
				"focus": true,
				"showReuseMessage": false
			},
			"options": {
				"cwd": "${workspaceFolder}"
			}
		},
		{
			"label": "CMake: Build Debug (verbose)",
			"type": "shell",
			"command": "cmake",
			"args": [
				"--build",
				"--preset",
				"debug",
				"--",
				"-v"
			],
			"windows": {
				"args": [
					"--build",
					"--preset",
					"win-debug",
					"--",
					"-v"
				]
			},
			"group": "build",
			"dependsOn": "CMake: Configure Debug",
			"problemMatcher": [
				"$gcc"
			],
			"presentation": {
				"reveal": "always",
				"panel": "dedicated",
				"clear": false,
				"echo": true,
				"focus": false
			},
			"options": {
				"cwd": "${workspaceFolder}"
			}
		},
		{
			"label": "CMake: Clean Debug",
			"type": "shell",
			"command": "cmake",
			"args": [
				"--build",
				"--preset",
				"debug",
				"--target",
				"clean"
			],
			"windows": {
				"args": [
					"--build",
					"--preset",
					"win-debug",
					"--target",
					"clean"
				]
			},
			"group": "build",
			"dependsOn": "CMake: Configure Debug",
			"problemMatcher": [
				"$gcc"
			],
			"presentation": {
				"reveal": "always",
				"panel": "shared",
				"clear": false,
				"echo": true,
				"focus": false
			},
			"options": {
				"cwd": "${workspaceFolder}"
			}
		},
		{
			"label": "CMake: Build RelWithDebInfo",
			"type": "shell",
			"command": "cmake",
			"args": [
				"--build",
				"--preset",
				"relwithdebinfo"
			],
			"windows": {
				"args": [
					"--build",
					"--preset",
					"win-relwithdebinfo"
				]
			},
			"group": "build",
			"dependsOn": "CMake: Configure RelWithDebInfo",
			"problemMatcher": [
				"$gcc"
			],
			"presentation": {
				"reveal": "always",
				"panel": "shared",
				"clear": false,
				"echo": true,
				"focus": false
			},
			"options": {
				"cwd": "${workspaceFolder}"
			}
		},
		{
			"label": "CMake: Build Release",
			"type": "shell",
			"command": "cmake",
			"args": [
				"--build",
				"--preset",
				"release"
			],
			"windows": {
				"args": [
					"--build",
					"--preset",
					"win-release"
				]
			},
			"group": "build",
			"dependsOn": "CMake: Configure Release",
			"problemMatcher": [
				"$gcc"
			],
			"presentation": {
				"reveal": "always",
				"panel": "dedicated",
				"clear": false,
				"echo": true,
				"focus": true,
				"showReuseMessage": false
			},
			"options": {
				"cwd": "${workspaceFolder}"
			}
		},
		{
			"label": "CMake: Build Optimized",
			"type": "shell",
			"command": "cmake",
			"args": [
				"--build",
				"--preset",
				"optimized"
			],
			"windows": {
				"args": [
					"--build",
					"--preset",
					"win-optimized"
				]
			},
			"group": "build",
			"dependsOn": "CMake: Configure Optimized",
			"problemMatcher": [
				"$gcc"
			],
			"presentation": {
				"reveal": "always",
				"panel": "dedicated",
				"clear": false,
				"echo": true,
				"focus": true,
				"showReuseMessage": false
			},
			"options": {
				"cwd": "${workspaceFolder}"
			}
		},
		{
			"label": "CMake: Build ASan+UBSan (Linux)",
			"type": "shell",
			"command": "cmake",
			"args": [
				"--build",
				"--preset",
				"asan-ubsan"
			],
			"group": "build",
			"dependsOn": "CMake: Configure ASan+UBSan (Linux)",
			"problemMatcher": [
				"$gcc"
			],
			"presentation": {
				"reveal": "always",
				"panel": "shared",
				"clear": false,
				"echo": true,
				"focus": false
			},
			"options": {
				"cwd": "${workspaceFolder}"
			}
		},
		{
			"label": "CMake: Build TSan (Linux)",
			"type": "shell",
			"command": "cmake",
			"args": [
				"--build",
				"--preset",
				"tsan"
			],
			"group": "build",
			"dependsOn": "CMake: Configure TSan (Linux)",
			"problemMatcher": [
				"$gcc"
			],
			"presentation": {
				"reveal": "always",
				"panel": "shared",
				"clear": false,
				"echo": true,
				"focus": false
			},
			"options": {
				"cwd": "${workspaceFolder}"
			}
		},
		// -----------------------------
		// Test
		// -----------------------------
		{
			"label": "CMake: Test Debug",
			"type": "shell",
			"command": "ctest",
			"args": [
				"--preset",
				"debug"
			],
			"windows": {
				"args": [
					"--preset",
					"win-debug"
				]
			},
			"group": "test",
			"dependsOn": "CMake: Build Debug",
			"problemMatcher": [],
			"presentation": {
				"reveal": dedicated",
				"clear": false,
				"echo": true,
				"focus": true,
				"showReuseMessage: true,
				"focus": false
			},
			"options": {
				"cwd": "${workspaceFolder}"
			}
		},
		{
			"label": "CMake: Test ASan+UBSan (Linux)",
			"type": "shell",
			"command": "ctest",
			"args": [
				"--preset",
				"asan-ubsan"
			],
			"group": "test",
			"dependsOn": "CMake: Build ASan+UBSan (Linux)",
			"problemMatcher": [],
			"presentation": {
				"reveal": "always",
				"panel": "shared",
				"clear": false,
				"echo": true,
				"focus": false
			},
			"options": {
				"cwd": "${workspaceFolder}"
			}
		},
		{
			"label": "CMake: Test TSan (Linux)",
			"type": "shell",
			"command": "ctest",
			"args": [
				"--preset",
				"tsan"
			],
			"group": "test",
			"dependsOn": "CMake: Build TSan (Linux)",
			"problemMatcher": [],
			"presentation": {
				"reveal": "always",
				"panel": "shared",
				"clear": false,
				"echo": true,
				"focus": false
			},
			"options": {
				"cwd": "${workspaceFolder}"
			}
		},
		// -----------------------------
		// Tools
		// -----------------------------
		{
			"label": "Clang-Tidy",
			"type": "shell",
			"command": "${workspaceFolder}/tools/clang-tidy.sh",
			"args": [
				"-v",
				"debug"
			],
			"windows": {
				"command": "pwsh",
				"args": [
					"-File",
					"${workspaceFolder}/tools/clang-tidy.ps1",
					"-ShowDetails",
					"debug"
				]
			},
			"group": "test",
			"problemMatcher": [],
			"presentation": {
				"reveal": "always",
				"panel": "shared",
				"clear": false,
				"echo": true,
				"focus": false
			},
			"options": {
				"cwd": "${workspaceFolder}"
			}
		},
		{
			"label": "Clang-Format",
			"type": "shell",
			"command": "${workspaceFolder}/tools/clang-format.sh",
			"args": [
				"-v"
			],
			"windows": {
				"command": "pwsh",
				"args": [
					"-File",
					"${workspaceFolder}/tools/clang-format.ps1",
					"-ShowDetails"
				]
			},
			"group": "test",
			"problemMatcher": [],
			"presentation": {
				"reveal": "always",
				"panel": "shared",
				"clear": false,
				"echo": true,
				"focus": false
			},
			"options": {
				"cwd": "${workspaceFolder}"
			}
		},
		{
			"label": "Check Format",
			"type": "shell",
			"command": "${workspaceFolder}/tools/check-format.sh",
			"args": [
				"-v"
			],
			"windows": {
				"command": "pwsh",
				"args": [
					"-File",
					"${workspaceFolder}/tools/check-format.ps1",
					"-ShowDetails"
				]
			},
			"group": "test",
			"problemMatcher": [],
			"presentation": {
				"reveal": "always",
				"panel": "shared",
				"clear": false,
				"echo": true,
				"focus": false
			},
			"options": {
				"cwd": "${workspaceFolder}"
			}
		},
		// -----------------------------
		// Packaging / Coverage / Prereqs
		// -----------------------------
		{
			"label": "CPack: Create Package",
			"type": "shell",
			"command": "cpack",
			"args": [
				"--config",
				"${workspaceFolder}/build/release/CPackConfig.cmake",
				"-G",
				"ZIP"
			],
			"windows": {
				"args": [
					"--config",
					"${workspaceFolder}/build/win-release/CPackConfig.cmake",
					"-G",
					"ZIP"
				]
			},
			"group": "build",
			"dependsOn": "CMake: Build Release",
			"problemMatcher": [],
			"presentation": {
				"reveal": "always",
				"panel": "shared",
				"clear": false,
				"echo": true,
				"focus": false
			},
			"options": {
				"cwd": "${workspaceFolder}"
			}
		},
		{
			"label": "Coverage: Generate Report",
			"type": "shell",
			"command": "${workspaceFolder}/tools/coverage.sh",
			"args": [
				"-v"
			],
			"windows": {
				"command": "pwsh",
				"args": [
					"-File",
					"${workspaceFolder}/tools/coverage.ps1",
					"-ShowDetails"
				]
			},
			"group": "test",
			"problemMatcher": [],
			"presentation": {
				"reveal": "always",
				"panel": "shared",
				"clear": false,
				"echo": true,
				"focus": false
			},
			"options": {
				"cwd": "${workspaceFolder}"
			}
		},
		{
			"label": "Check Prerequisites",
			"type": "shell",
			"command": "${workspaceFolder}/tools/check-prereqs.sh",
			"windows": {
				"command": "pwsh",
				"args": [
					"-File",
					"${workspaceFolder}/tools/check-prereqs.ps1"
				]
			},
			"group": "test",
			"problemMatcher": [],
			"presentation": {
				"reveal": "always",
				"panel": "shared",
				"clear": false,
				"echo": true,
				"focus": false
			},
			"options": {
				"cwd": "${workspaceFolder}"
			}
		}
	]
}
